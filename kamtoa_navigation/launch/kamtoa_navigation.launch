<?xml version="1.0"?>
<!-- Fully Autonomous Navigation Launch file-->
<launch>

  <!-- Map server -->
  <arg name="map" default="sim_world"/>
  <node name="map_server" pkg="map_server" type="map_server" args="$(find kamtoa_navigation)/maps/$(arg map).yaml"/>


  <!-- Initial pose for the Localizer -->
  <arg name="initial_pose_x" default="0.0"/>
  <arg name="initial_pose_y" default="0.0"/>
  <arg name="initial_pose_a" default="0.0"/>

  <!-- Robot Selector -->
  <arg name="sim" default="true"/>

  <!-- Som_o (Simulation) Selection -->
  <group if="$(arg sim)">
      <arg name="robot" default="som_o"/>
      <!-- Localizaer : AMCL -->
      <include file="$(find kamtoa_navigation)/launch/modules/amcl.launch.xml">
        <arg name="initial_pose_x" value="$(arg initial_pose_x)"/>
        <arg name="initial_pose_y" value="$(arg initial_pose_y)"/>
        <arg name="initial_pose_a" value="$(arg initial_pose_a)"/>
      </include>

      <!-- Velocity Smoother -->
      <include file="$(find kamtoa_navigation)/launch/modules/velocity_smoother.launch.xml"/>

      <!-- Navigation Stack (move_base's path planner , costmaps & obstacles manager) -->
      <include file="$(find kamtoa_navigation)/launch/modules/move_base.launch.xml">
          <arg name="robot" value="$(arg robot)"/>
      </include>

  </group>

  <!-- NOT THE SIMULATION (iCreate)  -->
  <group unless="$(arg sim)">
      <!-- iCreate Robot -->
      <arg name="robot" default="icreate"/>
      <!-- Localizaer : AMCL -->
      <include file="$(find kamtoa_navigation)/launch/modules/amcl_icreate.launch.xml">
        <arg name="initial_pose_x" value="$(arg initial_pose_x)"/>
        <arg name="initial_pose_y" value="$(arg initial_pose_y)"/>
        <arg name="initial_pose_a" value="$(arg initial_pose_a)"/>
      </include>
      <!-- Velocity Smoother -->
      <include file="$(find kamtoa_navigation)/launch/modules/velocity_smoother.launch.xml"/>

      <!-- Navigation Stack (move_base's path planner , costmaps & obstacles manager) -->
      <include file="$(find kamtoa_navigation)/launch/modules/move_base_icreate.launch.xml">
          <arg name="robot" value="$(arg robot)"/>
      </include>
  </group>



</launch>
